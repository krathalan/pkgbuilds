#!/usr/bin/env bash
# Maintainer: Hunter Peavey < krathalan at disroot dot org >
# shellcheck disable=SC2034
# shellcheck disable=SC2154

# General package information
pkgname=krathalans-desktop
pkgver=7
pkgrel=1
pkgdesc="Packages and configuration for Krathalan's desktop"
url="https://git.sr.ht/~krathalan/pkgbuilds"
license=("GPL3")
arch=("any")

source=("https://git.sr.ht/~krathalan/etc-config/archive/${pkgver}.tar.gz" "https://git.sr.ht/~krathalan/etc-config/blob/master/signatures/${pkgver}.tar.gz.sig")
validpgpkeys=("02AAA23ABDF1D538BD889D251AADE5E728FFC667")
sha512sums=("4395257906e248e3b406394363b0ad723a25df9af7cd64086b3b5997d798bd3602a385b29f182013bd118a25374404294207145cbb679c8faf07d943e316df55" "ad1b31c1a856aa08f98ee41e4d745ede091b679111e65b44d23b143ce895290a2cd6788702ce888dfb0a1f332d71454b528d37be5221cb02bb17d5bd96dabbc1")

# Dependencies
depends=(
    # Xorg packages
    "dmenu" "dunst" "feh" "i3-gaps" "i3lock" "i3status"
    "picom" "redshift" "scrot"
)

package() {
    cd "${srcdir}/etc-config-${pkgver}/desktop" || exit

    install -D -m644 dracut.conf.d/krathalans-custom-desktop.conf "${pkgdir}/etc/dracut.conf.d/krathalans-custom-desktop.conf"

    install -D -m644 systemd/system/i3lock.service "${pkgdir}/etc/systemd/system/i3lock.service"
}
